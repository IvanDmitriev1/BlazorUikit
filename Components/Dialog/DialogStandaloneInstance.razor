@namespace BlazorUiKit.Components

<dialog id="@Id"
        class="@ComponentCss"
        data-open="@ShouldBeOpened.ToHtml()">
    @if (DisplayOptions.HeadLess)
    {
        @ChildContent
    }
    else
    {
        <DialogHeader Options="DisplayOptions" Id="@Id" />

        @ChildContent
    }
</dialog>

@code {

    [Parameter, EditorRequired]
    public string Id { get; set; } = string.Empty;

    [Parameter, EditorRequired]
    public DialogDisplayOptions DisplayOptions { get; set; } = null!;

    [Parameter]
    public bool ShouldBeOpened { get; set; }

    [Parameter]
    public RenderFragment ChildContent { get; set; } = null!;

    private string ComponentCss => BuildComponentCss();

    private string BuildComponentCss()
    {
        using var cssBuilder = new CssBuilder(stackalloc char[256]);
        var builder = cssBuilder;

        builder.AddClass(DisplayOptions.MaxWidthBreakpoint.ToTailwindCssMaxWidth());
        builder.AddDialogInstanceStyle();

        return builder.ToString();
    }
}
